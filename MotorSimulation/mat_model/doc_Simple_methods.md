## 1. 置き換え方 (例)

### (a) 定数インダクタンス近似

磁化曲線を固定インダクタンス $L_d$, $L_q$ とみなす最もシンプルな方法です。

$$
i_d = \frac{\psi_d}{L_d}, \quad i_q = \frac{\psi_q}{L_q}
$$

```matlab
% ルックアップを削除し、代わりに
Ld = 1.0e-3;   % [H] 任意の固定値
Lq = 1.4e-3;   % [H]
i_d = psi_d / Ld;
i_q = psi_q / Lq;
```

###  (b) 一次近似 (斜め特性をまねる)
飽和を軽くまねたい場合、
$L_d$ を電流依存で一次減少させるだけでも「らしさ」が出ます。

```matlab
Ld0 = 1.0e-3;        % 無負荷
Ld_slope = -0.2e-3;  % 係数 (<0 で飽和)
Ld = max(Ld0 + Ld_slope*abs(i_d_prev), 0.3e-3); % 下限付き
i_d = psi_d / Ld;
```

## 2. MATLAB Function ブロック修正手順

1.  `table2D(...)` 呼び出しを削除して上記の簡易式を挿入。
2.  `psi_d_axis` など不要になったパラメータ宣言を外す
    （`IdTable` / `IqTable` も同様）。
3.  コード生成 (Embedded Coder) を行う場合は
    `coder.varsize` などの宣言も不要になるため削除。

### ⚠️ 注意点

* “トルク式 $T_e = P_n(\psi_d i_q - \psi_q i_d)$ は
    磁化モデルに整合していないとエネルギ整合が崩れます
    （特に可変インダクタンスを使うとき）。"
* "制御ゲイン調整やオブザーバ設計は、
    実機パラメータに近いモデルで最終確認するようにしてください。"

### まとめ

* シンプルな固定 $L_d/L_q$ へのデバッグに有用
    （磁化マップ準備が不要、計算コスト小）。
* 非線形効果を無視するため 高負荷・磁束弱め領域の精度は低い。
* 本番前には必ず実機データまたは詳細マップ版で再検証することを推奨します。
