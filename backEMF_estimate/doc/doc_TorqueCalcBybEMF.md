## IPMSM における磁束変動に対するトルク補償

（日本語訳・概要）

### 1. はじめに

* 永久磁石同期モータ（IPMSM）は**温度上昇によって磁束（特に永久磁石鎖交磁束 ψ\_pm）が減少**します。
* 同じ電流指令を与えても、磁束が弱くなると**発生トルクが低下**し、MTPA（最大トルク／電流比）テーブルどおりのトルクが得られなくなります。
* 従来は温度ごとに複数の MTPA テーブルを準備し切り替える方法が一般的でしたが、測定の手間とメモリを要します。
* 近年は**リアルタイムの磁束推定**を使い、テーブルを切り替えずにトルク一定化を図る制御方式が研究されています。ここでは「電流指令を直接変える」のではなく、**トルク指令側を補正**する（スケーリング／フィードバック）方法を中心にまとめます。

---

### 2. 温度がトルクと MTPA に与える影響

* IPMSM のトルク

  $$
    T_e=\frac{3}{2}p\bigl(\psi_{\text{pm}}\,I_q + (L_d-L_q)I_d I_q\bigr)
  $$

  温度上昇で **ψ\_pm がほぼ線形に低下**（例：−0.1 %/℃）→ 磁石トルク成分が減少。
* MTPA テーブルは基準温度で作成されるため、ψ\_pm が低下すると **テーブル出力の I\_d, I\_q では指定トルクが得られない**。その結果、特に高温域でトルク不足（デレーティング）が起こる。

---

### 3. フラックス推定を利用したトルク指令補償の代表的手法

| 方法                           | 概要                                                                                                                               | 長所                         | 留意点                                                        |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | -------------------------- | ---------------------------------------------------------- |
| **① フィードフォワード型トルクスケーリング**    | 推定磁束 $\hat\psi_{\text{pm}}$ に応じてトルク指令を比例補正<br>$T_{\text{ref,comp}} = T_{\text{ref}}\cdot\psi_{\text{base}}/\hat\psi_{\text{pm}}$ | 実装が非常に簡単                   | ψ\_pm 低下のみを仮定するため、インダクタンス変動やリラクタンス成分までは補償できず、効率が最適でない場合がある |
| **② トルクフィードバック制御（外側トルクループ）** | 推定トルク $\hat T_e$ と指令トルクとの差を PI 等で閉ループし、トルク指令または q 軸電流を自動調整                                                                       | モデル誤差に強く、高精度でトルク一定化        | 追加ループによりチューニングが必要                                          |
| **③ 単一 MTPA テーブル＋最小電流補正**    | 基準テーブルを保持したまま、磁束推定値を用いて**最小電流で所望トルクを実現する補正ベクトル (ΔI\_d, ΔI\_q)** をリアルタイムで計算し注入                                                    | トルク精度と MTPA 効率を両立。テーブル増設不要 | Lagrange などの最適化計算が追加される（ただし解析解可）                           |

> いずれも **磁束／トルク推定器** が鍵。センサレスの BEMF 推定やモデルベース観測器で磁束を得る例が多く、磁石温度センサを省ける。

---

### 4. 各手法のポイントと実績

1. **フィードフォワード型**

   * バック EMF 変化から磁束比を推定し、トルク指令を増幅。
   * 車載 SPMSM で 100 ℃ 時も 25 ℃ と同等のトルクを実現した報告あり。
   * リラクタンス成分や Ld/Lq 変動を無視すると効率がわずかに悪化。

2. **トルクフィードバック型**

   * 観測器で得た $\hat T_e$ を比較し、誤差を 0 にするよう I\_q を増減。
   * LPV 観測器と組み合わせ、EV モータで温度全域のトルク誤差を大幅に低減。
   * ループ設計次第で過渡応答や安定性が向上。

3. **最小電流補正型**

   * 一つの LUT をベースに、$\hat\psi_{\text{pm}}$ をパラメータとした解析式で最小電流条件 (MTPA) を再計算。
   * 25 ℃ テーブルのみで 70 ℃ 以上に相当する性能を達成したシミュレーション例。
   * オンライン計算は軽量（解析式）で、実機 DSP 実装済みの報告も。

---

### 5. まとめ

* **磁束推定を用いてトルク指令側を補正**することで、温度変動によるトルク低下を防ぎ、テーブル切替えの手間を省ける。
* 最も簡単なのは磁束比による**トルク指令スケーリング**、より高精度かつ効率を求めるなら**トルクフィードバック**や**最小電流補正**が有効。
* いずれの方式でもリアルタイム磁束推定が不可欠。既存の EKF/観測器による磁束推定を流用して容易に組み込めるため、実装コストは比較的低い。

---

### 参考文献（抜粋・英語）

1. Cho, S. Y. *et al.* “Torque Compensation Control Considering Permanent Magnet Temperature Variation”, IEEE Trans. Magn., 2019.
2. Kim, H. S. & Sul, S. K. “Real-time Torque Control of IPMSM under Flux Variations”, IEEE JESTPE, 2022.
3. Baek, H. J. *et al.* “Reduced Torque Compensation Method Based on a Single LUT”, IEEE Access, 2023.
4. Park, C. S. & Lee, J. S. “Torque Error Compensation of SPMSM versus Magnet Temperature”, Energies, 2017.
5. Muazzam, H. *et al.* “Thermal Derated Torque Compensation in EV IPMSM Drives”, IEEE Access, 2022.
6. Kang, D. *et al.* “Torque Accuracy Improvement of IPMSM Considering Temperature Variation”, Journal of Magnetics, 2021.
